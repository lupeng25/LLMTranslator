# LLMTranslator 使用说明书

## 1. 软件简介
LLMTranslator 是一款基于本地大语言模型（Ollama）的 Qt 翻译文件 (`.ts`) 自动化翻译工具。它利用大模型的上下文理解能力，能够批量、准确地将 Qt 界面文本翻译成多种目标语言，极大提高了国际化（i18n）开发的效率。

## 2. 前置条件
本软件依赖 **Ollama** 本地大模型服务。在使用前，请确保：
1.  **安装 Ollama**：请访问 [Ollama 官网](https://ollama.com/) 下载并安装。
2.  **下载模型**：打开终端（CMD 或 PowerShell），运行命令下载推荐模型：
    ```bash
    ollama pull qwen2.5:14b
    ```
    *(推荐使用 `qwen2.5`, `llama3` 或 `mistral` 等模型)*

## 3. 使用步骤

### 第一步：启动服务
确保 Ollama 服务正在后台运行。
*   您可以尝试在浏览器访问 `http://localhost:11434`，如果显示 "Ollama is running"，说明服务正常。

### 第二步：导入文件
1.  运行 `LLMTranslator.exe`。
2.  在 **“文件选择”** 区域，点击 **Browse** 按钮。
3.  选择您需要翻译的 `.ts` 文件（通常位于 Qt 项目的 `translations` 文件夹中）。

### 第三步：参数配置
在 **“参数配置”** 区域设置翻译选项：
*   **目标语言**：在下拉菜单中选择您希望翻译成的语言（如 English, Japanese, Vietnamese 等）。
*   **Ollama API URL**：保持默认 `http://localhost:11434/api/generate` 即可（除非您自定义了 Ollama 端口）。
*   **模型名称**：输入您电脑上已下载的模型名称（例如 `qwen2.5:14b`）。
    *   *提示：在终端输入 `ollama list` 可查看已安装的所有模型名称。*

### 第四步：执行翻译
1.  点击底部的 **“开始翻译”** 按钮。
2.  **等待处理**：
    *   软件会自动将翻译条目分批发送给大模型。
    *   进度条会实时更新进度。
    *   下方的“黑色日志窗口”会显示当前的交互详情。
3.  **完成**：当所有条目处理完毕，会弹出“Done”提示框。

### 第五步：保存结果
翻译完成后，绿色的 **“保存文件”** 按钮会被激活。
1.  点击 **“保存文件”**。
2.  选择保存路径（建议保存为新文件名，如 `app_zh_CN.ts` -> `app_en_US.ts`）。
3.  使用 Qt Linguist 打开生成的文件进行检查（可选），或直接发布使用。

## 4. 常见问题 (FAQ)

**Q1: 点击“开始翻译”后提示 "Network Error"？**
> **A**: 这通常是因为 Ollama 服务未启动。请检查任务栏右下角是否有 Ollama 图标，或尝试重启 Ollama。

**Q2: 翻译了一半卡住了怎么办？**
> **A**: 
> 1. 检查日志窗口是否有报错信息。
> 2. 大模型运行需要消耗较多内存，请确保电脑内存充足。
> 3. 您可以重新点击“开始翻译”，软件会重新开始处理（目前暂不支持断点续传，建议分批处理大文件）。

**Q3: 翻译结果有些词不准确？**
> **A**: 大模型的翻译质量取决于模型本身。建议尝试更换参数更大的模型（如从 7b 换成 14b 或 32b），或者在 prompt 中增加特定的上下文提示（当前版本暂需修改源码）。

**Q4: 界面显示乱码？**
> **A**: 请确保您的系统支持 UTF-8 编码。软件已内置中文编码修复，如果仍有问题，请反馈给开发者。

---
**技术支持**
如果您在使用过程中遇到任何问题，请联系开发团队或查看源码仓库。
